@(loginForm: Form[forms.LoginForm])(implicit request: Http.Request, messages: play.i18n.Messages)
@import utils.GlobalConfigHelper

@import helper._

@implicitField: FieldConstructor = @{ FieldConstructor(tags.forms.field_constructor.render) }

@authLayout {

  @request.flash.asScala().get("success").map { successFlashValue =>
    <div class="alert alert-success alert-dismissible fade show" role="alert">
      <i class="fas fa-check mr-2"></i>@successFlashValue
      <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
  }

  @request.flash.asScala().get("error").map { errorFlashValue =>
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
      <i class="fas fa-exclamation-triangle mr-2"></i>@errorFlashValue
      <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
  }

  <div class="login-box">
    <div class="login-logo">
      <b>@messages("app.title")</b>
    </div>
    
    <div class="card">
      <div class="card-body login-card-body">
        <p class="login-box-msg">@messages("auth.login.subtitle")</p>

        @form(action = routes.AuthController.login()) {
          
          @if(loginForm.hasGlobalErrors) {
            <div class="alert alert-danger">
              <i class="fas fa-exclamation-triangle mr-2"></i>
              @for(error <- loginForm.globalErrors) {
                @error.message
              }
            </div>
          }
          
          @CSRF.formField
          
          <div class="input-group mb-3">
            <input type="text" class="form-control @if(loginForm("username").hasErrors){is-invalid}" 
                   name="@loginForm("username").name" 
                   value="@loginForm("username").value.getOrElse("")"
                   placeholder="@messages("auth.username")">
            <div class="input-group-append">
              <div class="input-group-text">
                <span class="fas fa-user"></span>
              </div>
            </div>
            @if(loginForm("username").hasErrors) {
              <div class="invalid-feedback">
                @loginForm("username").errors.mkString(", ")
              </div>
            }
          </div>
          
          <div class="input-group mb-3">
            <input type="password" class="form-control @if(loginForm("password").hasErrors){is-invalid}" 
                   name="@loginForm("password").name"
                   placeholder="@messages("auth.password")">
            <div class="input-group-append">
              <div class="input-group-text">
                <span class="fas fa-lock"></span>
              </div>
            </div>
            @if(loginForm("password").hasErrors) {
              <div class="invalid-feedback">
                @loginForm("password").errors.mkString(", ")
              </div>
            }
          </div>
          
          <div class="row">
            <div class="col-12">
              <button type="submit" class="btn btn-primary btn-block">
                <i class="fas fa-sign-in-alt mr-2"></i>@messages("auth.login.button")
              </button>
            </div>
          </div>
        }
        
        <p class="mb-1 mt-3">
          <a href="@routes.AuthController.showForgotPassword()">@messages("auth.forgot.password")</a>
        </p>
        <p class="mb-0">
          <a href="@routes.AuthController.showRegister()" class="text-center">@messages("auth.register.new.account")</a>
        </p>
      </div>
    </div>
  </div>

}